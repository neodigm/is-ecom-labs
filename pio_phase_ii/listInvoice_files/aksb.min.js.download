/*
Copyright 2010 Google Inc.
Copyright 2016 Akamai Technolgies

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.

See the source code here:
     http://code.google.com/p/episodes/
*/


!function(){var e,t,n,r;!function(o){o.parent!==o&&void 0==o.AKSB&&(o=o.parent);var a=o.document;"undefined"==typeof o.AKSB&&(o.AKSB={});var i=o.AKSB;if(void 0!=i.prof&&i.prof.origin===!0){var s="number"==typeof i.prof.beaconrate?parseInt(i.prof.beaconrate,10):10;if(s<=100*Math.random())return}if(i.q=i.q||[],i.autorun="undefined"==typeof i.autorun||i.autorun,!i.version&&"X"!==o.AKSB.prof.akTT){i.version=12;var d,u,p,f,m,c;i.init=function(){i.bDone=!1,i.marks={},i.measures={},i.starts={},i.getClientProf(),i.processQ();var e=i.findStartWebTiming();e&&(i.mark("starttime",e),i.addEventListener("DOMContentLoaded",i.onready,!1),i.addEventListener("load",i.onload,!1),"complete"===a.readyState&&(i.onloadHasFired=!0,window.setTimeout(i.onload,1)),i.processQ())},i.processQ=function(){for(var e=i.q.length,t=0;t<e;t++){var n=i.q[t],r=n[0];"mark"===r?i.mark(n[1],n[2]):"measure"===r?i.measure(n[1],n[2],n[3]):"done"===r&&i.done(n[1])}},i.getClientProf=function(){i.prof=i.prof||{},d=i.prof.ipv6===!0||"true"===i.prof.ipv6,u=i.prof.beaconUrl||("https:"===a.location.protocol?"https:":"http:")+"//ds-aksb-a.akamaihd.net/2/"+i.prof.custid+"/b",e=escape(o.navigator.userAgent),t=escape(o.navigator.platform),p=escape(a.location.protocol.toLowerCase()+"//"+a.location.hostname.toLowerCase()+a.location.pathname);var s=o.navigator.connection||o.navigator.mozConnection||o.navigator.webkitConnection,l="",S="";if(s&&"number"==typeof s.type?s.type==s.WIFI?(l="wifi",S=7e6):s.type==s.CELL_2G?(l="cellular",S=384):s.type==s.CELL_3G?(l="cellular",S=42e3):s.type==s.CELL_4G?(l="cellular",S=1e5):s.type==s.ETHERNET?(l="ethernet",S=1e7):s.type==s.NONE?(l="none",S=0):l="unknown":s&&"string"==typeof s.type&&(l=s.type,s.downlinkMax&&(S=Math.round(1e3*s.downlinkMax))),n=escape(l),r=S,f=a.visibilityState||a.webkitVisibilityState||a.mozVisibilityState||a.msVisibilityState,m="undefined"!=typeof o.aFeoApplied,c=""!==a.location.search,i.prof.pct){var v=!(parseInt(i.prof.pct,10)<=100*Math.random());if(v&&void 0!==i.prof.clientip){var g=i.getMangledAddress(),E=d?"j":"i";u=("https:"===a.location.protocol?"https:":"http:")+"//"+E+g+"-ds-aksb-a.akamaihd.net/2/"+i.prof.custid+"/b"}}},i.getMangledAddress=function(){if(void 0===i.prof.clientip)return"";if(d){var e=i.prof.clientip.split(":");return(""==e[0]?"":parseInt(e[0],16).toString(32))+"z"+(""==e[1]?"":parseInt(e[1],16).toString(32))+"z"+(""==e[2]?"":parseInt(e[2],16).toString(32))}var e=i.prof.clientip.split(".");return("00000000"+(256*(256*(256*+e[0]+ +e[1])+ +e[2])+0).toString(16)).slice(-8)},i.mark=function(e,t){e&&(i.marks[e]=parseInt(t||(new Date).getTime(),10),"firstbyte"===e?i.measure("t_fb","starttime","firstbyte"):"onload"===e?i.measure("t_onload","starttime","onload"):"done"===e&&i.measure("t_plt","starttime","done"))},i.measure=function(e,t,n){if(e){var r;if("undefined"==typeof t)r="number"==typeof i.marks[e]?i.marks[e]:(new Date).getTime();else if("number"==typeof i.marks[t])r=i.marks[t];else{if("number"!=typeof t)return;r=t}var o;if("undefined"==typeof n)o=(new Date).getTime();else if("number"==typeof i.marks[n])o=i.marks[n];else{if("number"!=typeof n)return;o=n}i.starts[e]=parseInt(r,10),i.measures[e]=parseInt(o-r,10)}},i.done=function(e){i.mark("done");var t=function(){i.bDone=!0,i.autorun&&i.sendBeacon(),"function"==typeof e&&e()},n=i.getNavTimingAPI(),r=n.navigation,a=n.timing;if(void 0!==n){var s=function(){for(var e in a)i.mark(e,a[e]);if(i.measure("dE","domainLookupStart","domainLookupEnd"),i.measure("cS","domainLookupStart","connectStart"),a.secureConnectionStart&&i.measure("sS","domainLookupStart","secureConnectionStart"),i.measure("cE","domainLookupStart","connectEnd"),i.measure("rqS","domainLookupStart","requestStart"),i.measure("rsS","domainLookupStart","responseStart"),i.measure("rsE","domainLookupStart","responseEnd"),a.msFirstPaint)i.measure("fp","navigationStart","msFirstPaint");else if("undefined"!=typeof o.chrome&&o.chrome.hasOwnProperty("loadTimes")){var n=Math.round(1e3*o.chrome.loadTimes().firstPaintTime);n>0&&i.measure("fp","domainLookupStart",n)}i.measure("dl","domainLookupStart","domLoading"),i.measure("di","domainLookupStart","domInteractive"),i.measure("dlS","domainLookupStart","domContentLoadedEventStart"),i.measure("dlE","domainLookupStart","domContentLoadedEventEnd"),i.measure("dc","domainLookupStart","domComplete"),i.measure("leS","domainLookupStart","loadEventStart"),i.measure("leE","domainLookupStart","loadEventEnd"),t()},d=function(){r&&(0===r.type||1===r.type)&&a&&a.loadEventEnd>0?s():a&&a.loadEventEnd<=0&&setTimeout(d,100)};d()}},i.aksbVersion=function(){return""+(void 0===i.prof.blver?0:i.prof.blver)+":"+(void 0===i.version?0:i.version)},i.sendBeacon=function(o,a){o=o||u;var s=(i.measures,"");i.bf=i.bitField(),i.createBitField();var d={dE:i.measures.dE,cS:i.measures.cS,cE:i.measures.cE,rqS:i.measures.rqS,rsS:"undefined"!=typeof i.measures.rsS?i.measures.rsS:i.measures.t_fb,rsE:i.measures.rsE,sS:i.measures.sS,dl:i.measures.dl,di:i.measures.di,fp:i.measures.fp,dlS:i.measures.dlS,dlE:"undefined"!=typeof i.measures.dlE?i.measures.dlE:i.measures.t_onready,dc:i.measures.dc,leS:"undefined"!=typeof i.measures.leS?i.measures.leS:i.measures.t_onload,leE:"undefined"!=typeof i.measures.leE?i.measures.leE:i.measures.t_plt,to:i.measures.to,ol:i.prof.originlat,cr:i.prof.clientrtt,mt:n,mb:r,b:i.bf.get(),u:p,ua:e,pl:t,us:i.prof.ustr,gh:i.prof.ghostip,t:i.prof.token,rid:i.prof.requestid,r:i.prof.region,akM:i.prof.akM,akN:i.prof.akN,vc:i.aksbVersion(),bpcip:i.getMangledAddress(),akTX:i.prof.akTX,akTI:i.prof.akTI,ai:i.prof.ai,pmgn:i.prof.pmgn,pmgi:i.prof.pmgi,pmp:i.prof.pmp};if(d)for(var f in d)s+="&"+escape(f)+"="+("undefined"==typeof d[f]?"":d[f]);if(s){if(s=s.substring(1),a)for(var m in a)a.hasOwnProperty(m)&&(s+="&"+escape(m)+"="+escape(a[m]));var c=(i.bf.get(),new Image);return c.src=o+"?"+s,c.src}return""},i.bitField=function(e){var t=Math.abs(e),n=function(){};return n.prototype.set=function(e){return this.hasbit(e)?t:t|=e},n.prototype.hasbit=function(e){return e>t?0:t&e},n.prototype.get=function(){return t},new n},i.createBitField=function(){var e={MS_NT:1,IPv6:16,FEO:32,VIA_SPDY:64,VIS_HIDDEN:128,VIS_VISIBLE:256,VIS_PRERENDERED:512,QUERY_TRUNCATED:2048,RUM_AT_ORIGIN:4096,ONLOAD_HAS_FIRED:8192,VIA_HTTP_TWO:131072,TXN_ENABLED:262144,RUA_APPLIED:524288,VIA_QUIC:1048576};i.bf.set(e.MS_NT);var t=i.prof.protocol;void 0!==t&&("h2"==t.slice(0,2)?i.bf.set(e.VIA_HTTP_TWO):"spdy"==t.slice(0,4)&&i.bf.set(e.VIA_SPDY));var n=i.prof.qc;"string"==typeof n&&""!==n&&"0"!==n&&i.bf.set(e.VIA_QUIC),d&&i.bf.set(e.IPv6),m&&i.bf.set(e.FEO),"hidden"===f&&i.bf.set(e.VIS_HIDDEN),"visible"===f&&i.bf.set(e.VIS_VISIBLE),"prerendered"===f&&i.bf.set(e.VIS_PRERENDERED),c&&i.bf.set(e.QUERY_TRUNCATED),i.prof.origin===!0&&i.bf.set(e.RUM_AT_ORIGIN),i.onloadHasFired===!0&&i.bf.set(e.ONLOAD_HAS_FIRED),"true"===i.prof.ra&&i.bf.set(e.RUA_APPLIED),i.prof.akTT&&"O"!=i.prof.akTT&&i.bf.set(e.TXN_ENABLED)},i.findStartWebTiming=function(){var t=void 0,n=i.getNavTimingAPI();return"undefined"!=typeof n&&"undefined"!=typeof n.timing&&"undefined"!=typeof n.timing.navigationStart&&(t=e.match(/Firefox\/[78]\./i)?n.timing.unloadEventStart||n.timing.fetchStart:n.timing.navigationStart),t},i.onready=function(e){i.mark("onready",(new Date).getTime()),i.measure("t_onready","starttime","onready")},i.onload=function(e){i.mark("onload",(new Date).getTime()),i.autorun&&i.done()},i.addEventListener=function(e,t,n){return"undefined"!=typeof o.attachEvent?o.attachEvent("on"+e,t):o.addEventListener?o.addEventListener(e,t,n):void 0},i.getNavTimingAPI=function(){return o.performance||o.mozPerformance||o.msPerformance||o.webkitPerformance},i.init()}}(window),function(o){function a(){this.data={},this.value=[]}o.parent!==o&&void 0==o.AKSB&&(o=o.parent);var i=o.document;"undefined"==typeof o.RT&&(o.RT={});var s=o.RT;if(!s.version&&"undefined"!=typeof o.AKSB.version&&void 0!==Object.keys){s.version="0.2",s.init=function(){"complete"===i.readyState?window.setTimeout(s.getW3CTimings,1):s.addEventListener("load",s.getW3CTimings,!1)},s.getW3CTimings=function(){var d=new a,u=s.getResourceTimingAPI();for(var p in u)"undefined"!=typeof u[p].duration&&d.insert(u[p].name,[Math.round(u[p].redirectStart),Math.round(u[p].redirectEnd),Math.round(u[p].fetchStart),Math.round(u[p].domainLookupStart),Math.round(u[p].domainLookupEnd),Math.round(u[p].connectStart),Math.round(u[p].connectEnd),Math.round(u[p].secureConnectionStart),Math.round(u[p].requestStart),Math.round(u[p].responseStart),Math.round(u[p].responseEnd),Math.round(u[p].duration),u[p].initiatorType,u[p].nextHopProtocol,u[p].transferSize,u[p].encodedBodySize,u[p].decodedBodySize]);s.radtree=d,s.baseurl=i.location.protocol.toLowerCase()+"//"+i.location.hostname.toLowerCase()+i.location.pathname;var f=function(a){var d=new XMLHttpRequest;d.open("POST",("https:"===o.document.location.protocol?"https:":"http:")+"//ds-aksb-a.akamaihd.net/RRT",!0),d.setRequestHeader("Content-Type","application/x-www-form-urlencoded");var u={nt:escape(JSON.stringify(a)),rt:escape(JSON.stringify(s.radtree.data)),rid:o.AKSB.prof.requestid,gh:o.AKSB.prof.ghostip,b:o.AKSB.bf.get(),c:o.AKSB.prof.custid,us:o.AKSB.prof.ustr,ol:o.AKSB.prof.originlat,cr:o.AKSB.prof.clientrtt,ua:e,pl:t,mt:n,mb:r,vc:o.AKSB.aksbVersion(),bpcip:o.AKSB.getMangledAddress(),akTX:o.AKSB.akTX,akTI:o.AKSB.akTI,ai:o.AKSB.prof.ai,rf:"string"==typeof i.referrer?encodeURIComponent(i.referrer.replace(/\?.*/,"?")):""},p=[];for(var f in u)u.hasOwnProperty(f)&&u[f]&&p.push(f+"="+u[f]);d.send(p.join("&"))},m=o.performance&&o.performance.timing;if(m){var c=o.performance.timing,l=function(){if(c.loadEventEnd>0){var e=[c.domainLookupEnd-c.domainLookupStart,c.connectStart-c.domainLookupStart,c.connectEnd-c.domainLookupStart,c.secureConnectionStart?c.secureConnectionStart-c.domainLookupStart:null,c.requestStart-c.domainLookupStart,c.responseStart-c.domainLookupStart,c.responseEnd-c.domainLookupStart,c.domLoading-c.domainLookupStart,c.domInteractive-c.domainLookupStart,c.msFirstPaint?c.msFirstPaint-c.navigationStart:"undefined"!=typeof o.chrome&&o.chrome.hasOwnProperty("loadTimes")?Math.round(1e3*o.chrome.loadTimes().firstPaintTime)-c.domainLookupStart:null,c.domContentLoadedEventStart-c.domainLookupStart,c.domContentLoadedEventEnd-c.domainLookupStart,c.domComplete-c.domainLookupStart,c.loadEventStart-c.domainLookupStart,c.loadEventEnd-c.domainLookupStart],t={};t[s.baseurl]=e,f(t)}else c.loadEventEnd<=0&&setTimeout(l,100)};l()}else{var S=function(){if("AKSB"in o&&"measures"in o.AKSB&&"t_plt"in o.AKSB.measures){var e=[null,null,null,0,null,null,null,null,null,null,null,null,null,o.AKSB.measures.t_onload,o.AKSB.measures.t_plt],t={};t[s.baseurl]=e,f(t)}else setTimeout(S,100)};S()}},s.addEventListener=function(e,t,n){return"undefined"!=typeof o.attachEvent?o.attachEvent("on"+e,t):o.addEventListener?o.addEventListener(e,t,n):void 0},s.getResourceTimingAPI=function(){if("performance"in o){if("getEntriesByType"in o.performance)return o.performance.getEntriesByType("resource");if("webkitGetEntriesByType"in o.performance)return o.performance.webkitGetEntriesByType("resource")}return null},a.prototype.insert=function(e,t){for(var n=this.data;e;){var r=this.get_prefix(e,Object.keys(n)),o=r[0],a=r[1];if(!o||"string"!=typeof o||"string"!=typeof a)break;var i=o.length;if(o!==a){var s=a.slice(i,a.length),d=n[a];d===this.value&&(d=JSON.parse(JSON.stringify(d))),n[o]={},n[o][s]=d,delete n[a]}else n[o]===this.value&&(n[o]=JSON.parse(JSON.stringify(this.value)));e=e.slice(i,e.length),n=n[o]}return n[e]=e?t:null,!0},a.prototype.get_prefix=function(e,t){function n(e,t){return e.length<t.length?-1:e.length>t.length?1:0}function r(e,t){return""===t||null!=e&&null!=t&&(e=String(e),t=String(t),e.length>=t.length&&e.slice(0,t.length)===t)}if(t.sort(n),"undefined"!=typeof e){wc=e[0];for(var o in t)if(r(t[o],wc))for(var a=e.length;a>=1;a--)if(r(t[o],e.slice(0,a)))return[e.slice(0,a),t[o]]}return["",null]};var d=o.AKSB.prof.akTT;if(o.performance&&(o.performance.getEntries||o.performance.webkitGetEntries))if("R"===d)s.init();else{if("O"!==d&&void 0!==d||!(o.document.location.search.search("akamai-rum-rt=on")>=0)&&5<=100*Math.random())return;s.init()}}}(window)}();